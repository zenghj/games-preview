window.__require=function e(t,o,n){function i(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return i(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AnimationCallback:[function(e,t,o){"use strict";cc._RF.push(t,"6f16bk1kqJCFKsq6ciOS8xx","AnimationCallback");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onFinish=function(){this.node.opacity=0,this.node.getChildByName("AnimStart").opacity=0,this.node.getChildByName("AnimStart").getComponent(cc.Animation).stop(),this.node.getComponent(cc.BoxCollider).enabled=!1},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],ColliderManager:[function(e,t,o){"use strict";cc._RF.push(t,"202beKDXaZOF6NvtYLTOA/V","ColliderManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=cc._decorator,s=a.ccclass;a.property,function(e){e.default="default",e.mouse="mouse",e.hammer="hammer"}(c||(c={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isCollider=!1,t}return i(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.start=function(){this.gameComponent=cc.find("Canvas").getComponent("Game")},t.prototype.onCollisionEnter=function(){this.node.group===c.mouse&&null!=this.gameComponent&&(this._isCollider=!0,this.gameComponent._collidingMouseNode=this.node)},t.prototype.onCollisionExit=function(){this.node.group===c.mouse&&(this._isCollider=!1)},r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"fde9cj1yy5PEp1p4dJmV1v2","Game");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=cc._decorator,s=a.ccclass,u=a.property;(function(e){e[e.Simple=1e3]="Simple",e[e.Ordinary=2500]="Ordinary",e[e.Difficult=5e3]="Difficult"})(c||(c={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hammerPrefab=null,t.gameDifficultScore=c.Simple,t.timeRollerStep=1,t.gameOverPrefab=null,t.startPage=null,t.gameBg=null,t.gameRuleSp=null,t.hammerNode=null,t.gameRuleNode=null,t._collidingMouseNode=null,t._score=0,t._mouseIndexArr=[],t._gameOverNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.initGameData(),this.initEventListeners()},t.prototype.start=function(){},t.prototype.onClickGameStartBtn=function(){cc.find("Canvas/StartPage").active=!1,cc.find("Canvas/GameBg").active=!0,this.startGame()},t.prototype.onClickShowGameRule=function(){this.node.getComponent("SoundManager").playEffectSound("click",!1),this.gameRuleNode||(this.gameRuleNode=new cc.Node,this.gameRuleNode.addComponent(cc.Sprite).spriteFrame=this.gameRuleSp,this.node.addChild(this.gameRuleNode)),this.gameRuleNode.opacity=255},t.prototype.initGameData=function(){this._mouseDataTable=[{name:"harmful_mouse_0",scoreUpdateFunc:function(){this._score+=100}},{name:"harmful_mouse_1",scoreUpdateFunc:function(){this._score+=500}},{name:"kind_mouse_0",scoreUpdateFunc:function(){0===this._score?this._score+=200:this._score=Math.floor(1.2*this._score)}},{name:"kind_mouse_1",scoreUpdateFunc:function(){this._score-=100}},{name:"rabbit_0",scoreUpdateFunc:function(){this._score=Math.floor(this._score/2)}}]},t.prototype.initEventListeners=function(){var e=this;this.node.on(cc.Node.EventType.MOUSE_MOVE,function(t){e.onCreateHammer(t.getLocation())},this),this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(e.onCreateHammer(t.getLocation()),e.onHammerClick(),e.gameRuleNode){var o=cc.fadeOut(1);e.gameRuleNode.runAction(o)}}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.onCreateHammer(t.getLocation())},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.rotateHammer()},this);for(var t=0;t<this.mouseNodes.childrenCount;t++)this.mouseNodes.children[t].getChildByName("SpMouse").getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,this.onAnimationFinishEvent,this)},t.prototype.removeEventListeners=function(){this.node.targetOff(this);for(var e=0;e<this.mouseNodes.childrenCount;e++)this.mouseNodes.children[e].getChildByName("SpMouse").getComponent(cc.Animation).targetOff(this)},t.prototype.startGame=function(){cc.log("startGame"),this.initMouseOutEvent(),this.updateScoreLabel(0),this.schedule(this.countDownScheduleCallBack,this.timeRollerStep),this.node.getComponent("SoundManager").playBackGroundSound()},t.prototype.updateScoreLabel=function(e){this.gameScore.string="\u5f97\u5206\uff1a"+e},t.prototype.initMouseOutEvent=function(){if(0===this._mouseIndexArr.length){var e=Math.ceil(Math.random()*(this.mouseNodes.childrenCount-1));0===e&&(e=1);for(var t=0;t<e;t++){var o=Math.ceil(Math.random()*this.mouseNodes.childrenCount-1),n=Math.ceil(Math.random()*(this.animalAtlas.getSpriteFrames().length-1));if(!this._mouseIndexArr.includes(o)){this._mouseIndexArr.push(o);var i=this.mouseNodes.children[o].getChildByName("SpMouse");this.updateMouseNodeInfo(i,n),i.getComponent(cc.BoxCollider).enabled=!0,i.getComponent(cc.Sprite).spriteFrame=this.animalAtlas.getSpriteFrames()[n],i.getComponent(cc.Animation).play()}}}},t.prototype.updateMouseNodeInfo=function(e,t){e.getComponent("MouseManager")._isLive=!0,e._scoreUpdateFunc=this._mouseDataTable[t].scoreUpdateFunc.bind(this),e.getComponent("MouseManager")._tag=t,cc.log(t,this._mouseDataTable[t].scoreUpdateFunc)},t.prototype.onAnimationFinishEvent=function(){this._mouseIndexArr.pop(),this.initMouseOutEvent()},t.prototype.onCreateHammer=function(e){cc.isValid(this.hammerNode)||(this.hammerNode=cc.instantiate(this.hammerPrefab),this.hammerNode.zIndex=cc.macro.MAX_ZINDEX,this.node.addChild(this.hammerNode)),this.hammerNode.position=this.node.convertToNodeSpaceAR(e)},t.prototype.onHammerClick=function(){if(this.rotateHammer(),this.node.getComponent("SoundManager").playEffectSound("hit"),this._collidingMouseNode&&this._collidingMouseNode.getComponent("ColliderManager")._isCollider&&this._collidingMouseNode.getComponent("MouseManager")._isLive){cc.log("\u51fb\u4e2d",this._collidingMouseNode,this._collidingMouseNode.getComponent("MouseManager")._tag),this.node.getComponent("SoundManager").playEffectSound("hit"),this.node.getComponent("SoundManager").playEffectSound("score"),this._collidingMouseNode._scoreUpdateFunc(),this.showScoreEffectByTag(this._collidingMouseNode,this._collidingMouseNode.parent.getChildByName("ScoreEffectNode")),this._score=this._score<0?0:this._score,cc.log(this._score),this.updateScoreLabel(this._score),this._collidingMouseNode.getComponent("MouseManager")._isLive=!1;var e=this._collidingMouseNode.getComponent(cc.Sprite).spriteFrame.name+"_death";this._collidingMouseNode.getComponent(cc.Sprite).spriteFrame=this.animalDeathAtlas.getSpriteFrame(e),this._collidingMouseNode.getChildByName("AnimStart").getComponent(cc.Animation).play()}else cc.log("\u6ca1\u6709\u51fb\u4e2d")},t.prototype.showScoreEffectByTag=function(e,t){for(var o=0;o<t.childrenCount;o++)t.children[o].opacity=e.getComponent("MouseManager")._tag===o?255:0,t.children[o].runAction(cc.fadeOut(1))},t.prototype.rotateHammer=function(){this.hammerNode.angle=0===this.hammerNode.angle?30:0},t.prototype.countDownScheduleCallBack=function(){this.timeRollerBar.fillStart+=.01,this.timeRollerBar.fillStart===this.timeRollerBar.fillRange&&(this.unschedule(this.countDownScheduleCallBack),this.removeEventListeners(),this._score>this.gameDifficultScore?this.passGame():this.gameOver(),this.onFinishGameEvent())},t.prototype.passGame=function(){this.node.getComponent("SoundManager").playEffectSound("pass",!1)},t.prototype.gameOver=function(){this.node.getComponent("SoundManager").playEffectSound("lose",!1),this._gameOverNode||(this._gameOverNode=cc.instantiate(this.gameOverPrefab),this.node.addChild(this._gameOverNode)),this._gameOverNode.opacity=255,this._gameOverNode.runAction(cc.fadeOut(1.5))},t.prototype.onFinishGameEvent=function(){for(var e=0;e<this.mouseNodes.childrenCount;e++)this.mouseNodes.children[e].getChildByName("SpMouse").getComponent(cc.Animation).stop();setTimeout(function(){cc.director.loadScene("main")},2e3)},r([u(cc.Prefab)],t.prototype,"hammerPrefab",void 0),r([u(cc.Node)],t.prototype,"mouseNodes",void 0),r([u(cc.SpriteAtlas)],t.prototype,"animalAtlas",void 0),r([u(cc.SpriteAtlas)],t.prototype,"animalDeathAtlas",void 0),r([u(cc.Label)],t.prototype,"gameScore",void 0),r([u(cc.Sprite)],t.prototype,"timeRollerBar",void 0),r([u(Number)],t.prototype,"gameDifficultScore",void 0),r([u({type:Number,range:[0,2,.1],slide:!0})],t.prototype,"timeRollerStep",void 0),r([u(cc.Prefab)],t.prototype,"gameOverPrefab",void 0),r([u(cc.Sprite)],t.prototype,"startPage",void 0),r([u(cc.Sprite)],t.prototype,"gameBg",void 0),r([u(cc.SpriteFrame)],t.prototype,"gameRuleSp",void 0),r([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],MouseManager:[function(e,t,o){"use strict";cc._RF.push(t,"4a32fIGJAFG17YyZY1ZPgCj","MouseManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],SoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"5e199ybKghOF7Erjrts5Brv","SoundManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backGround=null,t.begin=null,t.score=null,t.pass=null,t.hit=null,t.lose=null,t.second=null,t.click=null,t.soundVolume=1,t._audioId=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.playEffectSound=function(e,t){void 0===t&&(t=!1),this[e]?cc.audioEngine.playEffect(this[e],t):cc.error(e+" sound not exist")},t.prototype.playBackGroundSound=function(){cc.audioEngine.stopAll(),this._audioId=cc.audioEngine.play(this.backGround,!0,this.soundVolume)},t.prototype.pauseMusic=function(){cc.audioEngine.pauseAll()},t.prototype.resumeMusic=function(){cc.audioEngine.resumeAll()},t.prototype.setVolume=function(){cc.audioEngine.setVolume(this._audioId,this.soundVolume)},t.prototype.stopAll=function(){cc.audioEngine.stopAll(),this._audioId=null},r([s(cc.AudioClip)],t.prototype,"backGround",void 0),r([s(cc.AudioClip)],t.prototype,"begin",void 0),r([s(cc.AudioClip)],t.prototype,"score",void 0),r([s(cc.AudioClip)],t.prototype,"pass",void 0),r([s(cc.AudioClip)],t.prototype,"hit",void 0),r([s(cc.AudioClip)],t.prototype,"lose",void 0),r([s(cc.AudioClip)],t.prototype,"second",void 0),r([s(cc.AudioClip)],t.prototype,"click",void 0),r([s({type:Number,range:[0,1,.1],slide:!0})],t.prototype,"soundVolume",void 0),r([a],t)}(cc.Component);o.default=u,cc._RF.pop()},{}]},{},["AnimationCallback","ColliderManager","Game","MouseManager","SoundManager"]);